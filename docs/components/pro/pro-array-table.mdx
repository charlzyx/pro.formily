# ğŸ‘Š Pro ArrayTable

> Pro ArrayTable æ˜¯ä¸€ä¸ªå¢å¼ºç‰ˆæœ¬çš„ ArrayTable, å¢åŠ äº†ä»¥ä¸‹å±æ€§ä¸åŠŸèƒ½

- âœ… schema æ‹“å±•: RowExpand / Toolbar / Footer
- âœ… åˆ—é…ç½®: æ’åºä¸æ‹–åŠ¨è°ƒæ•´åˆ—å®½
- âœ… å¯ç¼–è¾‘å¼¹çª—, ä½¿ç”¨äº‹ä»¶å§”æ‰˜ä¼˜åŒ–
- âœ… å¸¸ç”¨åŠŸèƒ½é…ç½®ç®€åŒ–ä¸å¢å¼º (pagination/rowSelection/expandable)
- âœ… `expandable.defaultExpandedAllRows` ç°åœ¨æ”¯æŒæƒ°æ€§åŠ è½½å•¦!
- âœ… `expandable.expandedRowKeys` / `rowSelection.selectedRowKeys` ç°åœ¨ä¼šæ ¹æ®é¡µç è°ƒæ•´è¿›è¡Œæ™ºèƒ½é‡ç½®!



## å±æ€§è¯´æ˜

|å±æ€§|è¯´æ˜|ç±»å‹|é»˜è®¤å€¼|
|----|---|---|---|
|`resizeable`|å¯æ‹–æ‹½åˆ—å®½åŠŸèƒ½å¼€å…³, åœ¨ `Columns` ä¹Ÿå¯ä»¥å•ç‹¬è®¾ç½®|`boolean`|`false`|
|`settings`|åŠ¨æ€åˆ—æ’åºåŠŸèƒ½å¼€å…³| `boolean` | `true`|
|`slice`|åˆ†é¡µæ€§èƒ½ä¼˜åŒ–å¼€å…³, é»˜è®¤å¼€å¯| `boolean`| `true`|
|`rowSelection`|å¯é€‰åˆ—é€‰æ‹©åŠŸèƒ½, é…ç½®ç®€åŒ–, æä¾›åŠŸèƒ½é’©å­, é»˜è®¤å…³é—­| `true\| TableProps['rowSelection']`|--|
|`pagination`|åˆ†é¡µåŠŸèƒ½, é…ç½®ç®€åŒ–, æä¾›åŠŸèƒ½é’©å­, é»˜è®¤å¼€å¯, `false` æ˜¾å¼å…³é—­| `false\| TableProps['pagination']`|`{hideOnSingle:true}`|
|`expandable`|è¡Œå±•å¼€åŠŸèƒ½, é…ç½®ç®€åŒ–, æä¾›åŠŸèƒ½é’©å­é…ç½®, é»˜è®¤å…³é—­| `TableProps['expandable']`|--|
|`RowExpand`|`Schame`å½¢å¼çš„ è¡Œå±•å¼€|--|--|
|`Toolbar`|`Schame`è‡ªå®šä¹‰è¡¨å¤´éƒ¨åˆ†å†…å®¹, è‡ªå®šä¹‰ç»„ä»¶åç§°å¿…é¡»åŒ…å« `Toolbar`|--|--|
|`Footer`|`Schame`è‡ªå®šä¹‰è¡¨å¤´éƒ¨åˆ†å†…å®¹, è‡ªå®šä¹‰ç»„ä»¶åç§°å¿…é¡»åŒ…å« `Footer` |--|--|


## ä»£ç æ¡ˆä¾‹

<code src="../demos/ProArrayTable.tsx"  />

### ProArrayTable.useTablePagination è·å–åˆ†é¡µä¿¡æ¯

```tsx | pure
export interface ITableSelectionContext {
  current: number;
  pageSize: number;
  total: number;
  setPagination: React.Dispatch<
    React.SetStateAction<{ current: number; pageSize: number }>
  >;
}
```

### ProArrayTable.useTableExpandable è·å– Expandable å±•å¼€è¡Œä¿¡æ¯

```tsx | pure
export interface ITableExpandableContext {
  // åˆ†é¡µé¡µç å˜æ›´ä¼šé‡ç½®
  expandedRowKeys: RowKey[];
  setExpandedRowKeys: React.Dispatch<React.SetStateAction<RowKey[]>>;
}
```

### ProArrayTable.useTableRowSelection è·å–åˆ—é€‰æ‹©ä¿¡æ¯

```tsx | pure
export interface ITableSelectionContext {
  selectedRowKeys: RowKey[];
  setSelectedRowKeys: React.Dispatch<React.SetStateAction<RowKey[]>>;
}
```

### ProArrayTable.DelegateAction ä»£ç†åŠ¨ä½œè§¦å‘å™¨

```tsx | pure
{
  /** åŠ¨ä½œæ ‡å¿—, ä¸ ShadowModal å¯¹åº”  */
  act: string;
  /** å½“å‰åˆ—æ‰€å± index, é»˜è®¤ä½¿ç”¨ ArrayBase.useIndex() è·å–å½“å‰æ•°æ®å¯¹åº”ä½ç½® */
  index?: number;
  /** æ•°æ®åˆå§‹åŒ–åŠ è½½å™¨, é»˜è®¤ä½¿ç”¨ field.record å½“å‰æ¨¡å‹æ‰€å¯¹åº” record */
  initLoader?: object | Promise<object>;
  /**
   * å…·ä½“å…ƒç´ , ä½†å¿…é¡»æœ‰æ ‡ç­¾åŒ…è£…, å› ä¸ºä¼šè¢«è¿½åŠ  data-å±æ€§å­—æ®µæ ‡å¿—ç»™äº‹ä»¶å§”æ‰˜æ¥è¯†åˆ«
   * ä¸å¡«å†™çš„æƒ…å†µä¸‹, ä½¿ç”¨ Button æ ‡ç­¾åŒ…è£… field.title
   */
  children?: React.ReactElement;
}
```

### ShadowModal/ShadowModal é€šç”¨å±æ€§
```tsx | pure
{
  /** åŠ¨ä½œæ ‡å¿—, ä¸ ShadowModal å¯¹åº”  */
  act: string;
  /** å­è¡¨å•Schema */
  schema: ISchema,
  /** createForm åˆ›å»ºçš„è¡¨å•å®ä¾‹, æœ‰è‡ªå®šä¹‰ effects ç­‰å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ª form è¿™ä¸ªä¼ å…¥ */
  form?: ReturnType<typeof createForm>,
  /** createSchemaField å‡½æ•°é…ç½® */
  schemaFieldOptions?: Parameters<typeof createSchemaField>[0],
  /** å–æ¶ˆäº‹ä»¶ */
  onCancel?: (
    ctx: ReturnType<typeof useProArrayTableContext>,
  ) => void | Promise<void>;
  /** å­è¡¨å•æäº¤äº‹ä»¶, å¯ä»¥åšç‚¹ä»€ä¹ˆ */
  onOk?: (
    data: any,
    ctx: ReturnType<typeof useProArrayTableContext>,
  ) => void | Promise<void>;
}
```
### ProArrayTable.ShadowModal è¡¨æ ¼å…±äº«å¼¹çª—, ç»“åˆ ShadowForm/DelegateAction ä½¿ç”¨

é™¤äº† `onOk,onCancel` antd/Modal å…¶ä»–å±æ€§

### ProArrayTable.ShadowDrawer è¡¨æ ¼å…±äº«æŠ½å±‰, ç»“åˆ ShaodwForm/DelegateAction ä½¿ç”¨

é™¤äº† `onOk,onCancel` antd/Drawer å…¶ä»–å±æ€§

### ProArrayTable.ProAddition å¼¹çª—/æŠ½å±‰å½¢å¼çš„å¯ç¼–è¾‘å†…å®¹æ–°å¢ç»„ä»¶

é«˜çº§è‡ªå¢ç»„ä»¶, æä¾›äº†å¼¹çª—/æŠ½å±‰å½¢å¼çš„ç©ºè°ƒç¼–è¾‘å†…å®¹, è¿™ä¸ªæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå†…ç½®äº†ä¸€ä¸ª ShadowFormçš„ Modal/Drawer

```tsx | pure
{
  /** å­è¡¨å•Schema */
  schema: ISchema,
  /** createForm åˆ›å»ºçš„è¡¨å•å®ä¾‹, æœ‰è‡ªå®šä¹‰ effects ç­‰å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ª form è¿™ä¸ªä¼ å…¥ */
  form?: ReturnType<typeof createForm>,
  /** createSchemaField å‡½æ•°é…ç½® */
  schemaFieldOptions?: Parameters<typeof createSchemaField>[0],
  /** å¼¹çª—å½¢å¼: Modal æˆ– Drawer, é»˜è®¤ modal  */
  popType: "modal" | "drawer"
  /** å…¶ä»– Modal / Drawer åŸå§‹å±æ€§ */
  ...others: React.ComponentProps<typeof Modal | typeof Drawer>
}
```

### ProArrayTable.Column åˆ—é…ç½®ç»„ä»¶

è¿½åŠ äº†å¯æ‹–æ‹½åˆ—å®½é…ç½®å¼€å…³, ä¼˜å…ˆçº§ > Table ä¸Šçš„ resizeable å±æ€§

```tsx | pure
{
  // æ˜¯å¦å¯æ‹–æ‹½è°ƒæ•´åˆ—å®½
  resizeable?: boolean
  // ... å…¶ä»–å‚è€ƒ @formily/antd ArrayBase.Column  é…ç½®
}
```

### ProArrayTable.Addition è‡ªå¢ç»„ä»¶

ä¸ `@formily/antd` ä¸­çš„ `ArrayTable.Addition` è¡¨ç°ä¸€è‡´

